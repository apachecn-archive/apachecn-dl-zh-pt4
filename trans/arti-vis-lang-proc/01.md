

# *第 1 章*

# 机器人基础知识

## 学习目标

本章结束时，您将能够:

*   描述机器人历史上的重要事件
*   解释使用人工智能、人工视觉和自然语言处理的重要性
*   根据目标或功能对机器人进行分类
*   识别机器人的部件
*   使用里程计估计机器人的位置

本章涵盖了机器人学的简史，对不同类型的机器人及其硬件进行了分类，并解释了一种使用里程计找到机器人位置的方法。

## 简介

机器人部门代表着人类的现在和未来。目前，在工业部门、研究实验室、大学，甚至在我们的家里都有机器人。机器人学科在不断发展，这也是它值得研究的原因之一。每个机器人都需要有人给它编程。即使是基于 AI 和自我学习的，也需要给初始目标。出现故障的机器人需要技术人员和不断的维护，基于人工智能的系统需要不断的数据输入和监控才能有效。

在这本书里，你将学习和练习许多有趣的技术，重点是人工计算机视觉、自然语言处理以及使用机器人和模拟器。这会让你在机器人的一些前沿领域打下坚实的基础。

## 机器人技术的历史

机器人技术源于创造智能机器来完成人类难以完成的任务的需要。但一开始并不叫“机器人学”。“机器人”一词是捷克作家卡雷尔·恰佩克在他的作品 **R.U.R.** ( **罗森公司的通用机器人**)中创造的。源自捷克语单词 **robota** ，意为奴役，与强制劳动有关。

恰佩克的工作闻名于世，而“机器人”一词也是如此，以至于这个词后来被著名教师和作家艾萨克·阿西莫夫用在他的作品中；他将机器人学定义为研究机器人及其特征的科学。

在这里你可以看到塑造机器人历史的重要事件的时间表:

![Figure 1.1: History of robotics](img/C13550_01_01.jpg)

###### 图 1.1:机器人技术的历史

![Figure 1.2: History of robotics continued](img/C13550_01_02.jpg)

###### 图 1.2:机器人技术的历史续

图 1.1 和 1.2 给出了机器人起源和发展的有用时间表。

## 人工智能

**AI** 指的是一套开发出来的算法，目的是赋予机器与人类一样的能力。它允许机器人自己做决定，与人互动，并识别物体。这种智能不仅存在于机器人中，也存在于大量其他应用程序和系统中(尽管人们可能没有意识到)。

有许多现实世界的产品已经在使用这种技术。这里列出了其中的一些，向您展示您可以构建的有趣的应用程序:

*   Siri :这是苹果公司创造的语音助手，他们的手机和平板电脑中都有。Siri 非常有用，因为它连接到互联网，允许它立即查找数据，发送信息，查看天气，以及做更多事情。
*   **网飞**:网飞是一家在线影视服务公司。它运行在一个非常准确的推荐系统上，该系统是使用人工智能开发的，可以根据用户的观看历史向用户推荐电影。比如一个用户平时看言情电影，系统会推荐言情系列和电影。
*   Spotify 是一个类似于网飞的在线音乐服务。它使用推荐系统向用户提供准确的歌曲建议。为此，它会考虑用户以前听过的歌曲以及添加到用户曲库的音乐类型。
*   **特斯拉的自动驾驶汽车**:这些汽车使用人工智能制造，可以检测障碍物、人，甚至交通信号，以确保乘客安全乘车。
*   吃豆人:像几乎任何其他视频游戏一样，吃豆人的敌人是用人工智能编程的。他们使用一种特殊的技术，不断计算碰撞距离，并考虑到墙壁的边界，他们试图诱捕 Pacman。由于这是一个非常简单的游戏，算法不是很复杂，但它是一个很好的例子，突出了 AI 在娱乐中的重要性。

### 自然语言处理

自然语言处理是人工智能的一个专门领域，它涉及研究人类和机器之间进行交流的不同方式。它是唯一能让机器人理解并再现人类语言的技术。

如果一个用户使用一个应该能够交流的应用程序，那么这个用户希望这个应用程序能够像人类一样进行对话。如果人形机器人使用糟糕的短语或没有给出与问题相关的答案，用户的体验将不会很好，机器人将不会是一个有吸引力的购买。这就是为什么在机器人学中理解和利用好 NLP 是非常重要的。

让我们看看一些使用 NLP 的真实应用程序:

*   Siri:苹果的语音助手 Siri 使用 NLP 来理解用户所说的话，并给出有意义的回应。
*   **Cortana** :这是微软创造的另一个语音助手，包含在 Windows 10 操作系统中。它的工作方式与 Siri 类似。
*   **Bixby**: Bixby is a part of Samsung that is integrated in the newest Samsung phones, and its user experience is similar to using Siri or Cortana.

    #### 注意

    你可能在问这三个哪个最好；但是，这取决于每个用户的好恶。

*   **电话接线员**:现在，打给客服的电话一般都是由电话答录机接听。这些机器大多是电话接线员，通过接收关键字输入来工作。大多数现代话务员都是使用 NLP 开发的，以便通过电话与客户进行更真实的对话。
*   Google Home : Google 的虚拟家庭助手使用 NLP 来回答用户的问题并执行给定的任务。

### 计算机视觉

**计算机视觉**是机器人学中常用的技术，可以使用不同的摄像机来模拟人眼的生物力学三维运动。它可以被定义为一组用于获取、分析和处理图像并将它们转换成对计算机有价值的信息的方法。这意味着收集的信息被转换成数字数据，这样计算机就可以处理它。这将在后面的章节中讨论。

以下是一些使用计算机视觉的真实例子:

*   **自动驾驶汽车**:自动驾驶汽车使用计算机视觉来获取交通和环境信息，并根据这些信息来决定要做什么。例如，如果汽车在摄像头中捕捉到一个过马路的行人，它就会停下来。
*   **手机相机应用**:许多基于手机的相机应用包括修改使用相机拍摄的照片的效果。例如， **Instagram** 允许用户实时使用滤镜，通过将用户的面部映射到滤镜来修改图像。
*   **网球鹰眼**:这是一个基于计算机的视觉系统，用于网球运动中跟踪球的轨迹，并显示其在球场上最可能的路径。它被用来检查球是否在球场边界内反弹。

### 机器人的种类

当谈到 AI 和 NLP 时，看一看现实世界的机器人是很重要的，因为这些机器人可以让你对现有模型的发展和改进有一个公平的想法。但是首先，让我们谈谈我们能找到的不同种类的机器人。一般来说，它们可以分为基于工业的机器人和基于服务的机器人，我们将在以下几节中讨论这些机器人。

### 工业机器人

工业机器人用于制造过程中，通常不具有人形。总的来说，它们看起来很像其他机器。这是因为它们是为了执行特定的工业任务而建造的。

### 服务机器人

服务机器人部分或全部以自主方式工作，并为人类执行有用的任务。这些机器人还可以进一步分为两组:

*   个人机器人:这些机器人通常用于家务清洁或娱乐行业。这是人们在讨论机器人时总会想象出来的那种机器，而且往往被想象成具有类似人类的特征。
*   野战机器人:这些是负责军事和探索任务的机器人。它们是用抗腐蚀材料建造的，因为它们必须经受住强烈的阳光和其他外部天气因素。

在这里你可以看到一些现实世界中个人机器人的例子:

*   **索菲亚**:这是汉森机器人公司创造的人形机器人。它被设计来和人类生活在一起并向他们学习。
*   **Roomba** :这是 iRobot 公司制造的一款清洁机器人。它由一个带轮子的圆形底座组成，可以在房子周围移动，同时计算出覆盖整个区域的最有效方式。
*   **Pepper** : Pepper 是软银机器人公司设计的社交机器人。虽然它有人类的形态，但它不以两足的方式移动。它还有一个轴距，提供良好的机动性。

### 机器人的硬件和软件

就像任何其他计算机系统一样，机器人由硬件和软件组成。机器人拥有的软件和硬件的种类将取决于它的用途和设计它的开发者。然而，有几种类型的硬件组件在几种机器人中更常用。我们将在本章中讨论这些。

首先，我们来看看每个机器人都有的三种组件:

*   **控制系统**:控制系统是机器人的核心部件，它与所有其他要控制的部件相连。它通常是微控制器或微处理器，其功率取决于机器人。
*   **致动器**:致动器是机器人的一部分，允许它对外部环境做出改变，比如用于移动整个机器人或机器人一部分的电机，或者允许机器人发出声音的扬声器。
*   **传感器**:这些部件负责获取信息，这样机器人就可以利用这些信息获得想要的输出。该信息可以与机器人的内部状态或其外部环境相关。基于此，传感器分为以下类型:
*   **Internal sensors**: Most of these are used for the measuring position of the robot, so you will usually find them inside the body of these robots. Here are a few internal sensors that can be used by a robot:

    **光遮断器**:这些传感器可以探测任何穿过传感器内槽的物体。

    **编码器**:编码器是一种能将微小的运动转化为电信号的传感器。该信号随后被控制系统用来执行几个动作。一个例子是在电梯中使用的编码器，当电梯已经到达正确的楼层时，编码器通知控制系统。通过计算编码器在自身轴上转动的次数，可以知道编码器输出的功率大小。这是一种转化为一定能量的平移运动。

    **信标和 GPS 系统**:信标和 GPS 系统是用于估计物体位置的传感器。GPS 系统能够成功地完成这项任务，要感谢它们从卫星上获得的信息。

*   **External sensors**: These are used to obtain data from the robot’s surroundings. They include nearness, contact, light, color, reflection, and infrared sensors.

    下图给出了机器人内部结构的图形表示:

![Figure 1.3: Schema of robot parts](img/C13550_01_03.jpg)

###### 图 1.3:机器人部件的模式

为了更好地理解前面的模式，我们将看看每个组件在模拟情况下是如何工作的。想象一个机器人被命令从 A 点到 B 点:

![Figure 1.4: Robot starting to move from point A](img/C13550_01_04.jpg)

###### 图 1.4:机器人从 A 点开始移动

机器人正在使用 GPS，它是一个**内部传感器**，不断检查它自己的位置，并检查它是否已经到达目标点。GPS 计算坐标并将其发送至**控制系统**，控制系统将对其进行处理。如果机器人没有到达 B 点，**控制系统**告诉**致动器**继续前进。下图显示了这种情况:

![Figure 1.5: Robot in the process of completing the path from A to B](img/C13550_01_05.jpg)

###### 图 1.5:机器人正在完成从 A 到 B 的路径

另一方面，如果 GPS 发送给**控制系统**的坐标与 B 点匹配，则**控制系统**会命令**执行机构**完成该过程，然后机器人不会移动:

![Figure 1.6: End of the path! The robot arrives at point B](img/C13550_01_06.jpg)

###### 图 1.6:路径的终点！机器人到达 B 点

## 机器人定位

通过使用前面提到的内部传感器之一，我们可以计算出机器人在一定位移量后的位置。这种计算叫做**里程计**，可以在编码器及其提供的信息的帮助下进行。在讨论这种技术时，重要的是要记住它的主要优点和缺点:

*   优点:它可以用来计算机器人的位置，而无需外部传感器，这将导致机器人的设计更加便宜。
*   缺点:最终位置计算不完全准确，因为它取决于地面和车轮的状态。

现在，让我们看看如何一步一步地执行这种计算。假设我们有一个用两个轮子移动的机器人，我们将如下进行:

1.  First, we should compute the distance completed by the wheels, which is done by using the information extracted from the engine’s encoders. In a two-wheeled robot, a simple schema could be like this:![Figure 1.7: Schema of a two-wheeled robot’s movement](img/C13550_01_07.jpg)

    ###### 图 1.7:两轮机器人的运动模式

    左轮行驶的距离是图 1.6 中用 DL 标记的虚线，DR 代表右轮。

2.  To calculate the linear displacement of the center point of the wheel’s axis, we will need the information calculated in the first step. Using the same simple schema, Dc would be the distance:

    #### 注意

    如果使用多轴控制盘，应该先研究轴是如何分布的，然后计算每个轴移动的距离。

    ![Figure 1.8: Schema of a two-wheeled robot’s movement (2)](img/C13550_01_08.jpg)

    ###### 图 1.8:两轮机器人的运动模式(2)

3.  To calculate the robot’s rotation angle, we will need the final calculation obtained in the first step. The angle named α is the one we are referring to:![Figure 1.9: Schema of a two-wheeled robot’s movement (3)](img/C13550_01_09.jpg)

    ###### 图 1.9:两轮机器人的运动模式(3)

    如图所示，在这种情况下，α为 90°，这意味着机器人旋转了特定的度数。

4.  一旦您获得了所有的信息，就有可能执行一组计算(将在下一节中介绍)来获得最终位置的坐标。

### 练习 1:计算机器人的位置

在本练习中，我们将使用前面的过程来计算双轮机器人移动一定时间后的位置。首先，让我们考虑以下数据:

*   车轮直径= 10 厘米
*   机器人底座长度= 80 厘米
*   每圈编码器计数= 76
*   每 5 秒钟左编码器计数= 600
*   每 5 秒钟右编码器计数= 900
*   初始位置= (0，0，0)
*   Moving time = 5 seconds

    #### 注意

    Encoder counts per lap 是我们用来计算编码器在其轴上运行一圈后产生的能量的测量单位。例如，在上面提供的信息中，我们有左边的编码器，它在 5 秒内完成 600 次计数。我们还知道，编码器完成一圈需要 76 次计数。因此，我们可以推断，在 5 秒钟内，编码器将完成 7 圈(600/76)。这样，如果我们知道 1 圈产生的能量，我们就知道 5 秒产生的能量。

对于初始位置，第一个和第二个数字是指 X 和 Y 坐标，最后一个数字是指机器人的旋转角度。这个数据有点相对，因为你必须想象轴从哪里开始。

现在，让我们遵循这些步骤:

1.  Let’s compute the completed distance of each wheel. We first compute the number of counts that each encoder performs during the time it moves. This can be easily computed by dividing the total movement by the given encoder time and multiplying it by the number of counts of each encoder:

    (移动时间/编码器时间)*左编码器计数:

    (5 / 5) * 600 = 600 次计数

    (移动时间/编码器时间)*右编码器计数:

    (5 / 5) * 900 = 900 次计数

    一旦计算出来，我们就可以用这个数据来获得总距离。由于车轮是圆形的，我们可以如下计算每个车轮的完整距离:

    [2πr /每圈编码器计数] *左编码器总计数:

    (10π/76) * 600 = 248.02 厘米

    [2πr /每圈编码器计数] *右编码器总计数:

    (10π/76) * 900 = 372.03 厘米

2.  Now compute the linear displacement of the center point of the wheels’ axis. This can be done with a simple calculation:

    (左轮距离+右轮距离)/ 2:

    (248.02 + 372.03) / 2 = 310.03 厘米

3.  Compute the robot’s rotation angle. To do this, you can calculate the difference between the distance completed by each wheel and divide it by the base length:

    (右轮距离-左轮距离)/基础长度:

    (372.03 - 248.02) / 80 = 1.55 弧度

4.  Finally, we can compute the final position by calculating each component separately. These are the equations to use to obtain each component:

    最终 x 位置=初始 x 位置+(车轮轴位移*旋转角度余弦):

    0 + (310.03 * cos (1.55)) = 6.45

    最终 y 位置=初始 y 位置+(车轮轴位移*旋转角度余弦):

    0 + (310.03 * sin (1.55)) = 309.96

    最终机器人旋转=初始机器人旋转+机器人旋转角度:

    0 + 1.55= 1.55

所以，经过这个过程，我们可以得出结论，机器人从(0，0，0)运动到了(6.45，309.96，1.55)。

### 如何与机器人一起工作

像任何其他软件开发一样，为机器人实现应用程序和程序的过程可以通过许多不同的方式来完成。

在接下来的章节中，我们将使用一些框架和技术，这些框架和技术可以抽象出一个特定的问题，并开发出一个容易适应各种机器人和设备的解决方案。在本书中，我们将使用**机器人操作系统** ( **ROS** )来实现这个目的。

在我们开始使用机器人之前要考虑的另一个问题是要使用的编程语言。你肯定知道并使用过一些语言，但是哪一种是最合适的呢？这个问题的真正答案是，没有特定的语言；它总是取决于手头的问题。但在我们的书中，由于我们将从事的活动种类，我们将使用 Python，正如你可能知道的，它是一种解释型的高级通用编程语言，用于人工智能和机器人技术。

通过使用 Python，就像使用其他语言一样，你可以开发任何你希望你的机器人拥有的功能。例如，当你的机器人探测到一个人时，你可以给它一个简单的问候行为。你也可以编写一个更复杂的功能，例如，当它“听到”音乐时跳舞。

如果您以前没有使用过 Python，现在我们将通过一些练习和活动向您介绍 Python 在机器人领域的应用。

### 练习 2:用 Python 计算车轮行驶的距离

在本练习中，我们将使用与我们在*练习 1* 、*计算机器人位置*中执行的相同过程，实现一个简单的 Python 函数来计算车轮行驶的距离。以下是需要遵循的步骤:

1.  导入所需的资源。在这种情况下，我们将使用数字π:

    ```
    from math import pi
    ```

2.  Create the function with the parameters. To compute this distance, we will need the following:

    车轮直径(厘米)

    每圈编码器计数

    用于测量编码器计数的秒数

    车轮编码器在给定的秒数内计数

    运动总时间

    这是函数定义:

    ```
    def wheel_distance(diameter, encoder, encoder_time, wheel, movement_time):
    ```

3.  从函数的实现开始。首先，计算编码器测量的距离:

    ```
    time = movement_time / encoder_time wheel_encoder = wheel * time
    ```

4.  将从上面获得的距离转换为我们期望的距离，这将是车轮行驶的距离:

    ```
    wheel_distance = (wheel_encoder * diameter * pi) / encoder
    ```

5.  返回最终值:

    ```
    return wheel_distance
    ```

6.  You can finally check whether the function is correctly implemented by passing values to it and make the corresponding calculation manual:

    ```
    wheel_distance(10, 76, 5, 400, 5)
    ```

    这个函数调用应该返回`165.34698176788385`。

笔记本中的输出应该是这样的:

![Figure 1.10: Final distance covered by the wheel](img/C13550_01_10.jpg)

###### 图 1.10:车轮行驶的最终距离

### 练习 3:用 Python 计算最终位置

在这个练习中，我们使用 Python 来计算机器人的最终位置，给定其初始位置、其通过轴完成的距离以及其旋转角度。您可以按照以下过程来完成:

1.  导入正弦和余弦函数:

    ```
    from math import cos, sin
    ```

2.  Define the function with the required parameters:

    机器人的初始位置(坐标)

    机器人中心轴的完整距离

    从初始点开始的角度变化:

    ```
    def final_position(initial_pos, wheel_axis, angle):
    ```

    通过对*练习 1:计算机器人位置中使用的公式进行编码来设置函数。*

    它们可以这样编码:

    ```
    final_x = initial_pos[0] + (wheel_axis * cos(angle))
    final_y = initial_pos[1] + (wheel_axis * sin(angle))
    final_angle = initial_pos[2] + angle
    ```

    #### 注意

    ```
    return(final_x, final_y, final_angle)
    ```

3.  Again, you can test the function by calling it with all the arguments and computing the result by hand:

    ```
    final_position((0,0,0), 125, 1)
    ```

    上述代码返回以下结果:

    ```
    (67.53778823351747, 105.18387310098706, 1)
    ```

    在这里，您可以看到整个实现和一个函数调用示例:

![Figure 1.11: Final position of the robot computed](img/C13550_01_11.jpg)

###### 图 1.11:计算出的机器人最终位置

### 活动 1:使用 Python 的里程计进行机器人定位

您正在创建一个在移动一定时间后检测机器人位置的系统。开发一个 Python 函数，在接收到以下数据后，该函数会给出机器人的最终位置:

*   以厘米为单位的车轮直径= 10 厘米
*   机器人底座长度= 80 厘米
*   每圈编码器计数= 76
*   用于测量编码器计数的秒数= 600
*   给定秒数内左右编码器计数= 900
*   初始位置= (0，0，0)
*   Movement duration in seconds = 5 seconds

    #### 注意

    前面练习中实现的功能可以帮助您完成活动。您可以使用几个步骤来继续进行此活动。

遵循以下步骤将有助于您完成练习:

1.  首先，你需要计算每个轮子完成的距离。
2.  要继续前进，你需要计算轴完成的距离。
3.  现在计算机器人的旋转角度。
4.  然后计算机器人的最终位置。

输出如下所示:

![Fig 1.11: Final position of a robot computed with the activity’s Python function](img/Image40151.jpg)

###### 图 1.11:用活动的 Python 函数计算出的机器人的最终位置

#### 注意:

这项活动的解决方案可在第 300 页找到。

## 总结

在这一章中，你已经了解了机器人世界。你已经学习了先进的技术，比如自然语言处理和计算机视觉，以及机器人技术。在这一章中，你已经使用了 Python，你将在后面的章节中用到它。

此外，您已经利用里程计计算机器人的位置，而无需外部传感器。如你所见，如果所需的数据可用，计算机器人的位置并不困难。请注意，虽然里程计是一种很好的技术，但在未来的章节中，我们将使用其他方法，这将使我们能够使用传感器，并且在结果方面可能更准确。

在下一章中，我们将着眼于计算机视觉和更实际的课题。例如，将向您介绍机器学习、决策树和人工神经网络，目标是将它们应用于计算机视觉。在本书的剩余部分，你会用到它们，而且你肯定会有机会把它们用于个人或职业目的。